–í–æ—Ç –∫—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ + —à–∞–≥–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏) –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã **Epoint** –Ω–∞ —Å–∞–π—Ç –∏–ª–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

---
###  **Page 1-9**
### üìå **–¶–µ–ª—å**

–û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –ø—Ä–∏–µ–º –æ–Ω–ª–∞–π–Ω-–ø–ª–∞—Ç–µ–∂–µ–π —á–µ—Ä–µ–∑ –ø–ª–∞—Ç–µ–∂–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É **Epoint**.

---

### üîß **–ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å Epoint –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**

1. –ê–¥—Ä–µ—Å –í–∞—à–µ–≥–æ —Å–∞–π—Ç–∞
2. URL —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã ‚Äî `success_url`
3. URL –æ—à–∏–±–∫–∏ –æ–ø–ª–∞—Ç—ã ‚Äî `error_url`
4. URL –¥–ª—è –ø—Ä–∏—ë–º–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–ª–∞—Ç–µ–∂–µ–π ‚Äî `result_url`

–ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:

* `public_key` ‚Äî –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á (ID —Ç–æ—Ä–≥–æ–≤—Ü–∞)
* `private_key` ‚Äî —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏–≥–Ω–∞—Ç—É—Ä—ã

---

### üöÄ **–®–∞–≥–∏ —Ä–∞–±–æ—Ç—ã –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã Epoint**

1. **–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å API-–∑–∞–ø—Ä–æ—Å**:

   * –°–æ–∑–¥–∞—Ç—å `json` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –ø–ª–∞—Ç–µ–∂–∞.
   * –ó–∞–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –≤ `base64` ‚Üí —ç—Ç–æ `data`.
   * –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å `signature`:

     ```plaintext
     base64_encode( sha1( private_key + data + private_key, true ) )
     ```

2. **–û—Ç–ø—Ä–∞–≤–∏—Ç—å POST-–∑–∞–ø—Ä–æ—Å** –Ω–∞:

   * `https://epoint.az/api/1/request` ‚Äî –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è URL —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ–ø–ª–∞—Ç—ã
     **–∏–ª–∏**
   * `https://epoint.az/api/1/checkout` ‚Äî –¥–ª—è –ø—Ä—è–º–æ–≥–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞

3. **–ö–ª–∏–µ–Ω—Ç –≤–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã** –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ–ø–ª–∞—Ç—ã –±–∞–Ω–∫–∞.

4. **–ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã:**

   * –£–¥–∞—á–∞ ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `success_url`
   * –û—à–∏–±–∫–∞ ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `error_url`

5. **–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏** –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä—É –Ω–∞ `result_url` (POST-–∑–∞–ø—Ä–æ—Å —Å –¥–µ—Ç–∞–ª—è–º–∏ –ø–ª–∞—Ç–µ–∂–∞).

---

### üßæ **–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `json` (–≤–Ω—É—Ç—Ä–∏ `data`)**

| –ü–∞—Ä–∞–º–µ—Ç—Ä               | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ                          |
| ---------------------- | ------------ | --------------------------------- |
| `public_key`           | ‚úÖ            | –í–∞—à ID –≤ —Å–∏—Å—Ç–µ–º–µ                  |
| `amount`               | ‚úÖ            | –°—É–º–º–∞ –æ–ø–ª–∞—Ç—ã                      |
| `currency`             | ‚úÖ            | –í–∞–ª—é—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `AZN`)          |
| `language`             | ‚úÖ            | –Ø–∑—ã–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (`az`, `en`, `ru`)  |
| `order_id`             | ‚úÖ            | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∑–∞–∫–∞–∑–∞              |
| `description`          | ‚≠ï            | –û–ø–∏—Å–∞–Ω–∏–µ (–¥–æ 1000 —Å–∏–º–≤–æ–ª–æ–≤)       |
| `is_installment`       | ‚≠ï            | 1 = —Ä–∞—Å—Å—Ä–æ—á–∫–∞, 0 = –æ–±—ã—á–Ω–∞—è –æ–ø–ª–∞—Ç–∞ |
| `success_redirect_url` | ‚≠ï            | –°—Å—ã–ª–∫–∞ –ø—Ä–∏ —É—Å–ø–µ—Ö–µ                 |
| `error_redirect_url`   | ‚≠ï            | –°—Å—ã–ª–∫–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ                 |
| `other_attr`           | ‚≠ï            | –î–æ–ø. –ø–∞—Ä–∞–º–µ—Ç—Ä—ã                    |

---

### üì§ **–ò—Ç–æ–≥:**

–í—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ `data` –∏ `signature` –Ω–∞ —Å–µ—Ä–≤–µ—Ä Epoint. –í –æ—Ç–≤–µ—Ç ‚Äî `redirect_url`, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç. –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –æ–ø–ª–∞—Ç—ã –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–∞ `result_url`.

–•–æ—á–µ—à—å –ø—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ `data` –∏ `signature`?



-----------------------------------------------------------------------------------------------------------
###  **Page 9-14**
–í–æ—Ç –∫—Ä–∞—Ç–∫–æ–µ **–ø–æ—à–∞–≥–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏** –æ–±—Ä–∞–±–æ—Ç–∫–∏ callback-–∑–∞–ø—Ä–æ—Å–∞ –æ—Ç –ø–ª–∞—Ç—ë–∂–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ **Epoint** —Å –¥–µ—Ç–∞–ª—è–º–∏:

---

## **1. –ü–æ–ª—É—á–µ–Ω–∏–µ callback –æ—Ç Epoint**

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, **Epoint** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ –≤–∞—à `result_url` HTTP **POST-–∑–∞–ø—Ä–æ—Å** —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

* `data` ‚Äî –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
* `signature` ‚Äî –ø–æ–¥–ø–∏—Å—å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏

---

## **2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–∞**

### –®–∞–≥ 1: –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ—é –ø–æ–¥–ø–∏—Å—å (signature)

–ù–∞ –≤–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ:

1. –ü–æ–ª—É—á–∏—Ç–µ `data` –∏–∑ POST-–∑–∞–ø—Ä–æ—Å–∞.
2. –°—Ñ–æ—Ä–º–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–æ–∫—É:
   `private_key + data + private_key`
3. –í—ã—á–∏—Å–ª–∏—Ç–µ SHA1 –æ—Ç —ç—Ç–æ–π —Å—Ç—Ä–æ–∫–∏ (–≤ –±–∏–Ω–∞—Ä–Ω–æ–º –≤–∏–¥–µ).
4. –ó–∞–∫–æ–¥–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ base64.

–í–æ—Ç C# –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç `signature` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–∞ –æ—Ç Epoint:

```csharp
using System;
using System.Security.Cryptography;
using System.Text;

public class EpointSignatureHelper
{
    public static string GenerateSignature(string privateKey, string data)
    {
        // –§–æ—Ä–º–∏—Ä—É–µ–º —Å—Ç—Ä–æ–∫—É: private_key + data + private_key
        string sgnString = privateKey + data + privateKey;

        // SHA1-—Ö–µ—à –≤ –±–∏–Ω–∞—Ä–Ω–æ–º –≤–∏–¥–µ
        using (SHA1 sha1 = SHA1.Create())
        {
            byte[] hashBytes = sha1.ComputeHash(Encoding.UTF8.GetBytes(sgnString));

            // –ó–∞–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å —Ö–µ—à –≤ base64
            return Convert.ToBase64String(hashBytes);
        }
    }
}
```

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```csharp
string privateKey = "your_private_key";
string data = "–ø–æ–ª—É—á–µ–Ω–Ω–æ–µ_–∑–Ω–∞—á–µ–Ω–∏–µ_data";

string signature = EpointSignatureHelper.GenerateSignature(privateKey, data);

// –°—Ä–∞–≤–Ω–∏–≤–∞–µ—à—å —ç—Ç—É –ø–æ–¥–ø–∏—Å—å —Å –ø—Ä–∏—à–µ–¥—à–µ–π –æ—Ç Epoint
bool isValid = (signature == signatureFromEpoint);
```

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ, –º–æ–≥—É —Ç–∞–∫–∂–µ –ø–æ–º–æ—á—å —Å –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º `data` –∏–∑ base64 –∏ –ø–∞—Ä—Å–∏–Ω–≥–æ–º JSON.

–û—Ç–ª–∏—á–Ω–æ, –≤–æ—Ç –∫–∞–∫ –≤ C#:

---

## ‚úÖ –†–∞—Å–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å `data` –∏–∑ base64 –∏ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å JSON

```csharp
using System;
using System.Text;
using System.Text.Json;

public class EpointDataHelper
{
    public static JsonDocument DecodeData(string base64Data)
    {
        // –î–µ–∫–æ–¥–∏—Ä—É–µ–º –∏–∑ base64
        byte[] dataBytes = Convert.FromBase64String(base64Data);
        
        // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —Å—Ç—Ä–æ–∫—É (UTF-8)
        string jsonString = Encoding.UTF8.GetString(dataBytes);
        
        // –†–∞–∑–±–∏—Ä–∞–µ–º JSON
        return JsonDocument.Parse(jsonString);
    }
}
```

---

## ‚úÖ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```csharp
string base64Data = "–ø–æ–ª—É—á–µ–Ω–Ω–æ–µ_–∑–Ω–∞—á–µ–Ω–∏–µ_data_–∏–∑_callback";

var jsonDoc = EpointDataHelper.DecodeData(base64Data);
var root = jsonDoc.RootElement;

// –ü—Ä–∏–º–µ—Ä—ã –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º:
string orderId = root.GetProperty("order_id").GetString();
string status = root.GetProperty("status").GetString();
string message = root.GetProperty("message").GetString();
decimal amount = root.GetProperty("amount").GetDecimal();

Console.WriteLine($"Order ID: {orderId}, Status: {status}, Amount: {amount}, Message: {message}");
```

---

## ‚ö†Ô∏è –£–±–µ–¥–∏—Å—å:

* –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ `System.Text.Json` –¥–æ—Å—Ç—É–ø–Ω–∞ —Å .NET Core 3.0+ –∏–ª–∏ .NET 5+
* –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å —Å—Ç–∞—Ä—ã–π .NET Framework, –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Newtonsoft.Json`

–•–æ—á–µ—à—å –ø—Ä–∏–º–µ—Ä –Ω–∞ `Newtonsoft.Json` —Ç–æ–∂–µ?


### –®–∞–≥ 2: –°—Ä–∞–≤–Ω–∏—Ç–µ –ø–æ–¥–ø–∏—Å–∏

* –°—Ä–∞–≤–Ω–∏—Ç–µ –≤–∞—à—É `signature` —Å —Ç–æ–π, —á—Ç–æ –ø—Ä–∏—à–ª–∞ –æ—Ç **Epoint**
* –ï—Å–ª–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç ‚Üí –∑–∞–ø—Ä–æ—Å –ø–æ–¥–ª–∏–Ω–Ω—ã–π

---

## **3. –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `data`**

* –†–∞—Å–∫–æ–¥–∏—Ä—É–π—Ç–µ `data` –∏–∑ base64 ‚Üí –ø–æ–ª—É—á–∏—Ç—Å—è JSON-—Å—Ç—Ä–æ–∫–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

---

## **4. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**

–ü—Ä–∏–º–µ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ—Å–ª–µ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è `data`:

```json
{
  "order_id": "12345",
  "status": "success",
  "code": "00",
  "message": "–û–ø–ª–∞—Ç–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ",
  "transaction": "...",
  "bank_transaction": "...",
  "operation_code": "100",
  "rrn": "123456789012",
  "card_name": "Ivan Ivanov",
  "card_mask": "123456******1234",
  "amount": 100.00,
  "other_attr": { ... }
}
```

* –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `status`, `code`, `message` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏
* –ü—Ä–∏–º–µ—Ä —Å—Ç–∞—Ç—É—Å–æ–≤:

  * `new` ‚Äî –ø–ª–∞—Ç—ë–∂ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
  * `success` ‚Äî –ø–ª–∞—Ç—ë–∂ —É—Å–ø–µ—à–µ–Ω
  * `error`, `server_error` ‚Äî –æ—à–∏–±–∫–∞
  * `returned` ‚Äî –≤–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤

---

## **5. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ ‚Äî –∑–∞–ø—Ä–æ—Å —Å—Ç–∞—Ç—É—Å–∞ –≤—Ä—É—á–Ω—É—é**

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ **—Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**, –≤—ã–∑–æ–≤–∏—Ç–µ API Epoint:

* URL: `https://epoint.az/api/1/get-status`
* –ú–µ—Ç–æ–¥: POST
* –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:

  * `data` ‚Äî base64(json)
  * `signature` ‚Äî –∫–∞–∫ –∏ —Ä–∞–Ω–µ–µ

---

## **–ò—Ç–æ–≥**

–°—Ü–µ–Ω–∞—Ä–∏–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:

1. –ü–æ–ª—É—á–∏–ª–∏ `POST` –æ—Ç Epoint ‚Üí –ø—Ä–æ–≤–µ—Ä–∏–ª–∏ `signature`
2. –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–ª–∏ `data` ‚Üí –ø–æ–ª—É—á–∏–ª–∏ —Å—Ç–∞—Ç—É—Å –∏ –¥–µ—Ç–∞–ª–∏ –ø–ª–∞—Ç–µ–∂–∞
3. –°–æ—Ö—Ä–∞–Ω–∏–ª–∏/–æ–±—Ä–∞–±–æ—Ç–∞–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Å–∏—Å—Ç–µ–º–µ
4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–¥–µ–ª–∞–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–∞ `get-status` –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è


---------------------------------------------------------------------------------------------------------
